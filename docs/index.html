<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multistage Record Linkage and Case Definition for Epidemiological Analysis • diyar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Multistage Record Linkage and Case Definition for Epidemiological Analysis">
<meta property="og:description" content='Perform multistage deterministic linkages, apply case definitions to datasets, and deduplicate records.
    Records (rows) from datasets are linked by different matching criteria and sub-criteria (columns) in a specified order of certainty. 
    The linkage process handles missing data and conflicting matches based on this same order of certainty.
    For episode grouping, rows of dated events (e.g. sample collection) or interval of events (e.g. hospital admission) are 
    grouped into chronological episodes beginning with a "Case". The process permits several options such as 
    episode lengths and recurrence periods which are used to build custom preferences for case assignment (definition).
    The record linkage and episode grouping processes assign unique group IDs to matching records or those grouped into episodes. 
    This then allows for record deduplication or sub-analysis within these groups.  '>
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">diyar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/episode_group.html">Implementing case definitions for epidemiological analysis in R</a>
    </li>
    <li>
      <a href="articles/number_line.html">Number lines and overlaps</a>
    </li>
    <li>
      <a href="articles/record_group.html">Multistage deterministic linkage in R</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="diyar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#diyar" class="anchor"></a>diyar</h1></div>

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>Record linkage and deduplication of individual-level data, such as repeated spells in hospital, or recurrent cases of infection is a common task in epidemiological analysis and other fields of research.</p>
<p>The <code>diyar</code> package aims to provide a simple and flexible implementation of deterministic record linkage and episode grouping for the application of case definitions in epidemiological analysis.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Install the latest CRAN release </span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"diyar"</span>)

<span class="co"># Or, install the development version from GitHub</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/remote-reexports">install_github</a></span>(<span class="st">"OlisaNsonwu/diyar"</span>)</code></pre></div>
</div>
<div id="cheat-sheet" class="section level2">
<h2 class="hasAnchor">
<a href="#cheat-sheet" class="anchor"></a>Cheat sheet</h2>
<p><a href="https://github.com/OlisaNsonwu/diyar/tree/master/cheatsheet/diyar2.pdf"><img src="https://github.com/OlisaNsonwu/diyar/blob/master/cheatsheet/thumbnail2.png?raw=true"></a></p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>There are two main aspects of the <code>diyar</code> package; multistage record grouping (<code><a href="reference/record_group.html">record_group()</a></code>) and episode grouping (<code><a href="reference/episode_group.html">fixed_episodes()</a></code>, <code><a href="reference/episode_group.html">rolling_episodes()</a></code> and <code><a href="reference/episode_group.html">episode_group()</a></code>) for applying case definitions in epidemiological analysis. <code>number_line</code> objects are used for both.</p>
<ul>
<li>
<code>number_line</code> objects - series of real numbers on a number line. These can be manipulated and merged.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(diyar)

l &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"01/04/2019"</span>, <span class="st">"%d/%m/%Y"</span>); r &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"30/04/2019"</span>, <span class="st">"%d/%m/%Y"</span>)
nl &lt;-<span class="st"> </span><span class="kw"><a href="reference/number_line.html">number_line</a></span>(l, r)
nl
<span class="co">#&gt; [1] "2019-04-01 -&gt; 2019-04-30"</span>
<span class="kw"><a href="reference/number_line.html">reverse_number_line</a></span>(nl)
<span class="co">#&gt; [1] "2019-04-30 &lt;- 2019-04-01"</span>
<span class="kw"><a href="reference/number_line.html">shift_number_line</a></span>(nl, <span class="op">-</span><span class="dv">2</span>)
<span class="co">#&gt; [1] "2019-03-30 -&gt; 2019-04-28"</span>
<span class="kw"><a href="reference/number_line.html">expand_number_line</a></span>(nl, <span class="dv">2</span>)
<span class="co">#&gt; [1] "2019-03-30 -&gt; 2019-05-02"</span>
<span class="kw"><a href="reference/number_line.html">number_line_sequence</a></span>(nl, <span class="dt">by =</span><span class="dv">3</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt;  [1] "2019-04-01" "2019-04-04" "2019-04-07" "2019-04-10" "2019-04-13"</span>
<span class="co">#&gt;  [6] "2019-04-16" "2019-04-19" "2019-04-22" "2019-04-25" "2019-04-28"</span></code></pre></div>
<ul>
<li>
<code><a href="reference/episode_group.html">fixed_episodes()</a></code>, <code><a href="reference/episode_group.html">rolling_episodes()</a></code> and <code><a href="reference/episode_group.html">episode_group()</a></code> - Group records into chronological episodes. <strong><em><code>epid</code> objects are now the default output. Use <code>to_s4</code> or <code><a href="reference/to_s4.html">to_df()</a></code> to change this to data.frames</em></strong>
</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(infections);
db &lt;-<span class="st"> </span>infections[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"date"</span>)]
db<span class="op">$</span>date
<span class="co">#&gt;  [1] "2018-04-01" "2018-04-07" "2018-04-13" "2018-04-19" "2018-04-25"</span>
<span class="co">#&gt;  [6] "2018-05-01" "2018-05-07" "2018-05-13" "2018-05-19" "2018-05-25"</span>
<span class="co">#&gt; [11] "2018-05-31"</span>

<span class="co"># Fixed episodes</span>
db<span class="op">$</span>f_epid &lt;-<span class="st"> </span><span class="kw"><a href="reference/episode_group.html">fixed_episodes</a></span>(<span class="dt">date =</span> db<span class="op">$</span>date, <span class="dt">case_length =</span> <span class="dv">15</span>, <span class="dt">display =</span> F, <span class="dt">group_stats =</span> T)
<span class="co">#&gt; Episode grouping complete - 0 record(s) with unique IDs.</span>

<span class="co"># Rolling episodes</span>
db<span class="op">$</span>r_epid &lt;-<span class="st"> </span><span class="kw"><a href="reference/episode_group.html">rolling_episodes</a></span>(<span class="dt">date =</span> db<span class="op">$</span>date, <span class="dt">case_length =</span> <span class="dv">15</span>, <span class="dt">recurrence_length =</span> <span class="dv">40</span>, <span class="dt">display =</span> F,
                              <span class="dt">group_stats =</span> T)
<span class="co">#&gt; Episode grouping complete - 0 record(s) with unique IDs.</span>
db
<span class="co">#&gt; # A tibble: 11 x 3</span>
<span class="co">#&gt;    date       f_epid                           </span>
<span class="co">#&gt;    &lt;date&gt;     &lt;epid&gt;                           </span>
<span class="co">#&gt;  1 2018-04-01 E.01 2018-04-01 -&gt; 2018-04-13 (C)</span>
<span class="co">#&gt;  2 2018-04-07 E.01 2018-04-01 -&gt; 2018-04-13 (D)</span>
<span class="co">#&gt;  3 2018-04-13 E.01 2018-04-01 -&gt; 2018-04-13 (D)</span>
<span class="co">#&gt;  4 2018-04-19 E.04 2018-04-19 -&gt; 2018-05-01 (C)</span>
<span class="co">#&gt;  5 2018-04-25 E.04 2018-04-19 -&gt; 2018-05-01 (D)</span>
<span class="co">#&gt;  6 2018-05-01 E.04 2018-04-19 -&gt; 2018-05-01 (D)</span>
<span class="co">#&gt;  7 2018-05-07 E.07 2018-05-07 -&gt; 2018-05-19 (C)</span>
<span class="co">#&gt;  8 2018-05-13 E.07 2018-05-07 -&gt; 2018-05-19 (D)</span>
<span class="co">#&gt;  9 2018-05-19 E.07 2018-05-07 -&gt; 2018-05-19 (D)</span>
<span class="co">#&gt; 10 2018-05-25 E.10 2018-05-25 -&gt; 2018-05-31 (C)</span>
<span class="co">#&gt; 11 2018-05-31 E.10 2018-05-25 -&gt; 2018-05-31 (D)</span>
<span class="co">#&gt; # ... with 1 more variable: r_epid &lt;epid&gt;</span></code></pre></div>
<ul>
<li>
<code><a href="reference/record_group.html">record_group()</a></code> - Perform multistage deterministic linkages while addressing missing data using a specified list of alternative matching criteria or matching range of values. <strong><em><code>pid</code> objects are now the default output. Use <code>to_s4</code> or <code><a href="reference/to_s4.html">to_df()</a></code> to change this to a data.frames</em></strong>
</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Two stages of record grouping</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(staff_records);

staff_records<span class="op">$</span>pids_a &lt;-<span class="st"> </span><span class="kw"><a href="reference/record_group.html">record_group</a></span>(staff_records, <span class="dt">sn =</span> r_id, <span class="dt">criteria =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(forename, surname),
                     <span class="dt">data_source =</span> sex, <span class="dt">display =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Record grouping complete - 1 record(s) assigned a group unique ID.</span>
staff_records
<span class="co">#&gt; # A tibble: 7 x 6</span>
<span class="co">#&gt;    r_id forename surname  sex   dataset    pids_a      </span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;      &lt;pid&gt;       </span>
<span class="co">#&gt; 1     1 James    Green    M     Staff list P.1 (CRI 02)</span>
<span class="co">#&gt; 2     2 &lt;NA&gt;     Anderson M     Staff list P.2 (CRI 02)</span>
<span class="co">#&gt; 3     3 Jamey    Green    M     Pay slips  P.1 (CRI 02)</span>
<span class="co">#&gt; 4     4 ""       &lt;NA&gt;     F     Pay slips  P.4 (No Hit)</span>
<span class="co">#&gt; 5     5 Derrick  Anderson M     Staff list P.2 (CRI 02)</span>
<span class="co">#&gt; 6     6 Darrack  Anderson M     Pay slips  P.2 (CRI 02)</span>
<span class="co">#&gt; 7     7 Christie Green    F     Staff list P.1 (CRI 02)</span></code></pre></div>
<p>Find out more <a href="https://olisansonwu.github.io/diyar/index.html">here</a>!</p>
</div>
<div id="bugs-and-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-and-issues" class="anchor"></a>Bugs and issues</h2>
<p>Please report any bug or issues with using this package <a href="https://github.com/OlisaNsonwu/diyar/issues">here</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=diyar">https://​cloud.r-project.org/​package=diyar</a>
</li>
<li>Report a bug at <br><a href="https://github.com/OlisaNsonwu/diyar/issues">https://​github.com/​OlisaNsonwu/​diyar/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Olisaeloka Nsonwu <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=diyar"><img src="http://www.r-pkg.org/badges/version/diyar" alt="CRAN version"></a></li>
<li><a href="http://www.r-pkg.org/pkg/diyar"><img src="http://cranlogs.r-pkg.org/badges/diyar" alt="CRAN RStudio mirror downloads"></a></li>
<li><a href="https://codecov.io/github/OlisaNsonwu/diyar?branch=master"><img src="https://codecov.io/gh/OlisaNsonwu/diyar/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://travis-ci.org/OlisaNsonwu/diyar"><img src="https://travis-ci.org/OlisaNsonwu/diyar.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Olisaeloka Nsonwu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
