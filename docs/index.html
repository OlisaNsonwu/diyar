<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multistage Record Linkage and Case Definition for Epidemiological Analysis • diyar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Multistage Record Linkage and Case Definition for Epidemiological Analysis">
<meta property="og:description" content="Perform multistage deterministic linkages and apply case definitions to datasets.
    Records are linked by different matching criteria in a specified order of certainty. 
    The linkage process handles missing data and conflicting matches using this same order.
    Track events (e.g. sample collection) and period (e.g. hospital admission) to episodes. 
    This process permits several options such as episode lengths and recurrence.
    Record linkage and episode tracking assign unique group identifiers to matched records.
    Duplicate events or records can then be identified or sub-analyses performed within each group.  ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">diyar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/episodes.html">Implementing case definitions for epidemiological analysis in R</a>
    </li>
    <li>
      <a href="articles/links.html">Multistage deterministic linkage in R</a>
    </li>
    <li>
      <a href="articles/number_line.html">Number lines and overlaps</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/OlisaNsonwu/diyar/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="diyar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#diyar" class="anchor"></a>diyar</h1></div>

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>Record linkage and deduplication of individual-level data, such as repeated spells in hospital, or recurrent cases of infection is a common task in epidemiological analysis and other fields of research.</p>
<p>The <code>diyar</code> package aims to provide a simple and flexible implementation of multistage deterministic record linkage and episode grouping.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># Install the latest CRAN release </span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"diyar"</span>)

<span class="co"># Or, install the development version from GitHub</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"OlisaNsonwu/diyar"</span>)</pre></div>
</div>
<div id="cheat-sheet" class="section level2">
<h2 class="hasAnchor">
<a href="#cheat-sheet" class="anchor"></a>Cheat sheet</h2>
<p><a href="https://github.com/OlisaNsonwu/diyar/blob/master/cheatsheet/diyar.pdf"><img src="https://github.com/OlisaNsonwu/diyar/blob/master/cheatsheet/thumbnail.png?raw=true"></a></p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>There are two main aspects of the <code>diyar</code> package; multistage data linkage grouping (<code><a href="reference/links.html">links()</a></code>) and episode tracking (<code><a href="reference/episodes.html">episodes()</a></code>). <code>number_line</code> objects are used in both.</p>
<ul>
<li>
<code><a href="reference/number_line.html">number_line()</a></code> - creates a range of real numbers on a number line.
<ul>
<li>They can be manipulated - <code>reverse_number_line</code>, <code>shift_number_line</code>, <code>expand_number_line</code>, <code>number_line_sequence</code>, <code>invert_number_line</code>, <code>compress_number_line</code>, <code>union_number_lines</code>, <code>subtract_number_lines</code>, <code>intersect_number_lines</code>.</li>
<li>Logical tests for overlap - <code>overlaps</code>, <code>overlap</code>, <code>exact</code>, <code>reverse</code>, <code>chain</code>, <code>across</code>, <code>aligns_start</code>, <code>aligns_end</code>, <code>inbetween</code>.</li>
</ul>
</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">diyar</span>)

<span class="no">l</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"01/04/2019"</span>, <span class="st">"%d/%m/%Y"</span>); <span class="no">r</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"30/04/2019"</span>, <span class="st">"%d/%m/%Y"</span>)
<span class="no">nl</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/number_line.html">number_line</a></span>(<span class="no">l</span>, <span class="no">r</span>)
<span class="no">nl</span>
<span class="co">#&gt; [1] "2019-04-01 -&gt; 2019-04-30"</span>
<span class="fu"><a href="reference/number_line.html">reverse_number_line</a></span>(<span class="no">nl</span>)
<span class="co">#&gt; [1] "2019-04-30 &lt;- 2019-04-01"</span>
<span class="fu"><a href="reference/number_line.html">expand_number_line</a></span>(<span class="no">nl</span>, -<span class="fl">2</span>)
<span class="co">#&gt; [1] "2019-04-03 -&gt; 2019-04-28"</span></pre></div>
<ul>
<li>
<code><a href="reference/episodes.html">episodes()</a></code> - tracks temporal episodes.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">infections</span>);
<span class="no">db</span> <span class="kw">&lt;-</span> <span class="no">infections</span>[<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"date"</span>)]
<span class="co"># Dates</span>
<span class="no">db</span>$<span class="no">date</span>
<span class="co">#&gt;  [1] "2018-04-01" "2018-04-07" "2018-04-13" "2018-04-19" "2018-04-25"</span>
<span class="co">#&gt;  [6] "2018-05-01" "2018-05-07" "2018-05-13" "2018-05-19" "2018-05-25"</span>
<span class="co">#&gt; [11] "2018-05-31"</span>

<span class="co"># Fixed episodes</span>
<span class="fu"><a href="reference/episodes.html">episodes</a></span>(<span class="kw">date</span> <span class="kw">=</span> <span class="no">db</span>$<span class="no">date</span>,
         <span class="kw">case_length</span> <span class="kw">=</span> <span class="fl">15</span>,
         <span class="kw">display</span> <span class="kw">=</span> <span class="st">"none"</span>,
         <span class="kw">group_stats</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; Episode tracking completed in &lt; 0.01 secs!</span>
<span class="co">#&gt;  [1] "E.01 2018-04-01 -&gt; 2018-04-13 (C)" "E.01 2018-04-01 -&gt; 2018-04-13 (D)"</span>
<span class="co">#&gt;  [3] "E.01 2018-04-01 -&gt; 2018-04-13 (D)" "E.04 2018-04-19 -&gt; 2018-05-01 (C)"</span>
<span class="co">#&gt;  [5] "E.04 2018-04-19 -&gt; 2018-05-01 (D)" "E.04 2018-04-19 -&gt; 2018-05-01 (D)"</span>
<span class="co">#&gt;  [7] "E.07 2018-05-07 -&gt; 2018-05-19 (C)" "E.07 2018-05-07 -&gt; 2018-05-19 (D)"</span>
<span class="co">#&gt;  [9] "E.07 2018-05-07 -&gt; 2018-05-19 (D)" "E.10 2018-05-25 -&gt; 2018-05-31 (C)"</span>
<span class="co">#&gt; [11] "E.10 2018-05-25 -&gt; 2018-05-31 (D)"</span>

<span class="co"># Rolling episodes</span>
<span class="fu"><a href="reference/episodes.html">episodes</a></span>(<span class="kw">date</span> <span class="kw">=</span> <span class="no">db</span>$<span class="no">date</span>,
         <span class="kw">case_length</span> <span class="kw">=</span> <span class="fl">15</span>,
         <span class="kw">recurrence_length</span> <span class="kw">=</span> <span class="fl">40</span>,
         <span class="kw">display</span> <span class="kw">=</span> <span class="st">"none"</span>,
         <span class="kw">episode_type</span> <span class="kw">=</span> <span class="st">"rolling"</span>,
         <span class="kw">group_stats</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; Episode tracking completed in &lt; 0.01 secs!</span>
<span class="co">#&gt;  [1] "E.1 2018-04-01 -&gt; 2018-05-31 (C)" "E.1 2018-04-01 -&gt; 2018-05-31 (D)"</span>
<span class="co">#&gt;  [3] "E.1 2018-04-01 -&gt; 2018-05-31 (D)" "E.1 2018-04-01 -&gt; 2018-05-31 (R)"</span>
<span class="co">#&gt;  [5] "E.1 2018-04-01 -&gt; 2018-05-31 (D)" "E.1 2018-04-01 -&gt; 2018-05-31 (D)"</span>
<span class="co">#&gt;  [7] "E.1 2018-04-01 -&gt; 2018-05-31 (D)" "E.1 2018-04-01 -&gt; 2018-05-31 (D)"</span>
<span class="co">#&gt;  [9] "E.1 2018-04-01 -&gt; 2018-05-31 (D)" "E.1 2018-04-01 -&gt; 2018-05-31 (R)"</span>
<span class="co">#&gt; [11] "E.1 2018-04-01 -&gt; 2018-05-31 (D)"</span></pre></div>
<ul>
<li>
<code><a href="reference/links.html">links()</a></code> - multistage deterministic linkage with missing data.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb4"><pre class="r"><span class="co"># Two-stage exact matches</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">staff_records</span>);

<span class="no">staff_records</span>$<span class="no">pids_a</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/links.html">links</a></span>(<span class="kw">criteria</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">staff_records</span>$<span class="no">forename</span>,
                                              <span class="no">staff_records</span>$<span class="no">surname</span>),
                              <span class="kw">data_source</span> <span class="kw">=</span> <span class="no">staff_records</span>$<span class="no">sex</span>,
                              <span class="kw">display</span> <span class="kw">=</span> <span class="st">"none"</span>)
<span class="co">#&gt; Data linkage completed in &lt; 0.01 secs!</span>
<span class="no">staff_records</span>
<span class="co">#&gt;   r_id forename  surname sex    dataset        pids_a</span>
<span class="co">#&gt; 1    1    James    Green   M Staff list P.1 (CRI 002)</span>
<span class="co">#&gt; 2    2     &lt;NA&gt; Anderson   M Staff list P.2 (CRI 002)</span>
<span class="co">#&gt; 3    3    Jamey    Green   M  Pay slips P.1 (CRI 002)</span>
<span class="co">#&gt; 4    4              &lt;NA&gt;   F  Pay slips P.4 (No Hits)</span>
<span class="co">#&gt; 5    5  Derrick Anderson   M Staff list P.2 (CRI 002)</span>
<span class="co">#&gt; 6    6  Darrack Anderson   M  Pay slips P.2 (CRI 002)</span>
<span class="co">#&gt; 7    7 Christie    Green   F Staff list P.1 (CRI 002)</span>

<span class="co"># Single-stage user-defined logical tests</span>
<span class="co"># Matching `sex` and + 20-year age gaps</span>
<span class="no">age</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">30</span>, <span class="fl">28</span>, <span class="fl">40</span>, <span class="fl">25</span>, <span class="fl">25</span>, <span class="fl">29</span>, <span class="fl">27</span>)
<span class="no">sex</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>)
<span class="no">f1</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">x</span>, <span class="no">y</span>) (<span class="no">y</span> - <span class="no">x</span>) <span class="kw">%in%</span> <span class="fl">0</span>:<span class="fl">20</span>
<span class="fu"><a href="reference/links.html">links</a></span>(<span class="kw">criteria</span> <span class="kw">=</span> <span class="no">sex</span>,
      <span class="kw">sub_criteria</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">cr1</span> <span class="kw">=</span> <span class="fu"><a href="reference/sub_criteria.html">sub_criteria</a></span>(<span class="no">age</span>, <span class="kw">funcs</span> <span class="kw">=</span> <span class="no">f1</span>)),
      <span class="kw">display</span> <span class="kw">=</span> <span class="st">"none"</span>)
<span class="co">#&gt; Data linkage completed in &lt; 0.01 secs!</span>
<span class="co">#&gt; [1] "P.3 (CRI 001)" "P.3 (CRI 001)" "P.3 (CRI 001)" "P.7 (CRI 001)"</span>
<span class="co">#&gt; [5] "P.3 (CRI 001)" "P.3 (CRI 001)" "P.7 (CRI 001)"</span>

<span class="co"># + 20-year age gaps only</span>
<span class="fu"><a href="reference/links.html">links</a></span>(<span class="kw">criteria</span> <span class="kw">=</span> <span class="st">"place_holder"</span>,
      <span class="kw">sub_criteria</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">cr1</span> <span class="kw">=</span> <span class="fu"><a href="reference/sub_criteria.html">sub_criteria</a></span>(<span class="no">age</span>, <span class="kw">funcs</span> <span class="kw">=</span> <span class="no">f1</span>)),
      <span class="kw">display</span> <span class="kw">=</span> <span class="st">"none"</span>)
<span class="co">#&gt; Data linkage completed in &lt; 0.01 secs!</span>
<span class="co">#&gt; [1] "P.3 (CRI 001)" "P.3 (CRI 001)" "P.3 (CRI 001)" "P.3 (CRI 001)"</span>
<span class="co">#&gt; [5] "P.3 (CRI 001)" "P.3 (CRI 001)" "P.3 (CRI 001)"</span></pre></div>
<p>Find out more <a href="https://olisansonwu.github.io/diyar/index.html">here!</a></p>
</div>
<div id="bugs-and-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-and-issues" class="anchor"></a>Bugs and issues</h2>
<p>Please report any bug or issues with using this package <a href="https://github.com/OlisaNsonwu/diyar/issues">here</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=diyar">https://​cloud.r-project.org/​package=diyar</a>
</li>
<li>Browse source code at <br><a href="https://github.com/OlisaNsonwu/diyar/">https://​github.com/​OlisaNsonwu/​diyar/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/OlisaNsonwu/diyar/issues">https://​github.com/​OlisaNsonwu/​diyar/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Olisaeloka Nsonwu <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=diyar"><img src="http://www.r-pkg.org/badges/version/diyar" alt="CRAN version"></a></li>
<li><a href="https://www.r-pkg.org/pkg/diyar"><img src="https://cranlogs.r-pkg.org/badges/diyar" alt="CRAN RStudio mirror downloads"></a></li>
<li><a href="https://codecov.io/github/OlisaNsonwu/diyar?branch=master"><img src="https://codecov.io/gh/OlisaNsonwu/diyar/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Olisaeloka Nsonwu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
