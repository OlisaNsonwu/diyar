<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Record Linkage and Epidemiological Case Definitions in R • diyar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Record Linkage and Epidemiological Case Definitions in R">
<meta property="og:description" content="An R package for record linkage and implementing epidemiological case definitions in R.
    Record linkage is implemented either through a multistage determinitic approach or a probablisitic approach. 
    Matching records are assigned to unqiue groups. There are mechanisms to address misssing data and conflicting matches across linkage stages.
    Track and assign events (e.g. sample collection) and periods (e.g. hospital admission) to unique groups based on a case definition. 
    The tracking process permits several options such as episode lengths and recurrence.
    Duplicate events or records can then be identified for removal or further analyses.  ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">diyar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/episodes.html">Epidemiological case definitions in R</a>
    </li>
    <li>
      <a href="articles/links.html">Record linkage with diyar</a>
    </li>
    <li>
      <a href="articles/number_line.html">`number_line` and overlaps</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/OlisaNsonwu/diyar/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="diyar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#diyar" class="anchor"></a>diyar</h1></div>

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>Record linkage and distinguishing between index, duplicate and recurrent events are common tasks in epidemiological analyses and other fields of research, particularly as part of a case definition. Implementing these in <code>R</code> can be complex and challenging. The <code>diyar</code> package provides a convenient and flexible way of doing these in <code>R</code>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># Install the latest CRAN release </span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"diyar"</span>)

<span class="co"># Or, install the development version from GitHub</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"OlisaNsonwu/diyar"</span>)</pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><img src="fig_r1_light.png" width="1000" height="580"></p>
<div id="number-line" class="section level3">
<h3 class="hasAnchor">
<a href="#number-line" class="anchor"></a>Number line</h3>
<p>Use <code><a href="reference/number_line.html">number_line()</a></code> to create <code>number_line</code> objects - a range of numeric values. These can be split or manipulated in several ways.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">diyar</span>)
<span class="no">nl</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/number_line.html">number_line</a></span>(<span class="fl">1</span>, <span class="fl">10</span>); <span class="no">nl</span>
<span class="co">#&gt; [1] "1 -&gt; 10"</span>
<span class="fu"><a href="reference/number_line.html">invert_number_line</a></span>(<span class="no">nl</span>)
<span class="co">#&gt; [1] "-1 &lt;- -10"</span>
<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="no">nl</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">3</span>)
<span class="co">#&gt; [1] "1 -&gt; 4"  "4 -&gt; 7"  "7 -&gt; 10"</span></pre></div>
<p><code><a href="reference/overlaps.html">overlap()</a></code> and related functions test how <code>number_line</code> objects overlap.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="reference/overlaps.html">overlap_method</a></span>(<span class="no">nl</span>, <span class="no">nl</span>); <span class="fu"><a href="reference/overlaps.html">reverse</a></span>(<span class="no">nl</span>, <span class="no">nl</span>)
<span class="co">#&gt; [1] "exact"</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="no">nl2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/number_line.html">reverse_number_line</a></span>(<span class="no">nl</span>); <span class="no">nl2</span>
<span class="co">#&gt; [1] "10 &lt;- 1"</span>
<span class="fu"><a href="reference/overlaps.html">overlap_method</a></span>(<span class="no">nl</span>, <span class="no">nl2</span>); <span class="fu"><a href="reference/overlaps.html">reverse</a></span>(<span class="no">nl</span>, <span class="no">nl2</span>)
<span class="co">#&gt; [1] "reverse"</span>
<span class="co">#&gt; [1] TRUE</span></pre></div>
<p>Set operations such as <code><a href="reference/set_operations.html">union_number_lines()</a></code> are also possible for pairs of <code>number_line</code> objects.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">nl3</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/number_line.html">number_line</a></span>(<span class="fl">1</span>, <span class="fl">20</span>)
<span class="no">nl4</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/number_line.html">number_line</a></span>(<span class="fl">3</span>, <span class="fl">6</span>)
<span class="no">nl3</span>; <span class="no">nl4</span>
<span class="co">#&gt; [1] "1 -&gt; 20"</span>
<span class="co">#&gt; [1] "3 -&gt; 6"</span>
<span class="fu"><a href="reference/overlaps.html">overlap_method</a></span>(<span class="no">nl3</span>, <span class="no">nl4</span>)
<span class="co">#&gt; [1] "inbetween"</span>
<span class="fu"><a href="reference/set_operations.html">intersect_number_lines</a></span>(<span class="no">nl3</span>, <span class="no">nl4</span>)
<span class="co">#&gt; [1] "3 -&gt; 6"</span>
<span class="fu"><a href="reference/set_operations.html">subtract_number_lines</a></span>(<span class="no">nl3</span>, <span class="no">nl4</span>)
<span class="co">#&gt; $n1</span>
<span class="co">#&gt; [1] "1 -&gt; 3"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $n2</span>
<span class="co">#&gt; [1] "6 -&gt; 20"</span></pre></div>
</div>
<div id="record-linkage" class="section level3">
<h3 class="hasAnchor">
<a href="#record-linkage" class="anchor"></a>Record linkage</h3>
<p>Use <code><a href="reference/links.html">links()</a></code> to create a unique identifier for matching records based on a multistage deterministic approach to record linkage.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">attr_1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">NA</span>)
<span class="no">attr_2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">NA</span>, <span class="fl">NA</span>, <span class="fl">NA</span>)
<span class="fu"><a href="reference/links.html">links</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">attr_1</span>, <span class="no">attr_2</span>))
<span class="co">#&gt; [1] "P.1 (CRI 001)" "P.1 (CRI 001)" "P.1 (CRI 001)" "P.1 (CRI 002)"</span>
<span class="co">#&gt; [5] "P.1 (CRI 002)" "P.6 (No hits)" "P.7 (No hits)" "P.8 (No hits)"</span></pre></div>
<p><code><a href="reference/links_wf_probabilistic.html">links_wf_probabilistic()</a></code> is a wrapper function of <code><a href="reference/links.html">links()</a></code> to implement probabilistic record linkage.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">missing_staff_id</span>)
<span class="no">dfr</span> <span class="kw">&lt;-</span> <span class="no">missing_staff_id</span>[<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"staff_id"</span>,  <span class="st">"initials"</span>, <span class="st">"hair_colour"</span>, <span class="st">"branch_office"</span>)]
<span class="fu"><a href="reference/links_wf_probabilistic.html">links_wf_probabilistic</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(<span class="no">dfr</span>), <span class="kw">score_threshold</span> <span class="kw">=</span> -<span class="fl">4.2</span>)
<span class="co">#&gt; $pid</span>
<span class="co">#&gt; [1] "P.1 (CRI 001)" "P.2 (No hits)" "P.3 (No hits)" "P.4 (No hits)"</span>
<span class="co">#&gt; [5] "P.5 (No hits)" "P.6 (No hits)" "P.1 (CRI 001)"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $pid_weights</span>
<span class="co">#&gt;      sn_x sn_y cmp.staff_id cmp.initials cmp.hair_colour cmp.branch_office</span>
<span class="co">#&gt; [1,]    1    7            0            1               1                 1</span>
<span class="co">#&gt; [2,]    2    2           NA           NA              NA                NA</span>
<span class="co">#&gt; [3,]    3    3           NA           NA              NA                NA</span>
<span class="co">#&gt; [4,]    4    4           NA           NA              NA                NA</span>
<span class="co">#&gt; [5,]    5    5           NA           NA              NA                NA</span>
<span class="co">#&gt; [6,]    6    6           NA           NA              NA                NA</span>
<span class="co">#&gt; [7,]    7    7            1            1               1                 1</span>
<span class="co">#&gt;      cmp.weight cmp.threshold prb.staff_id prb.initials prb.hair_colour</span>
<span class="co">#&gt; [1,]          3            NA    -4.321928     1.148392        1.733354</span>
<span class="co">#&gt; [2,]         NA            NA           NA           NA              NA</span>
<span class="co">#&gt; [3,]         NA            NA           NA           NA              NA</span>
<span class="co">#&gt; [4,]         NA            NA           NA           NA              NA</span>
<span class="co">#&gt; [5,]         NA            NA           NA           NA              NA</span>
<span class="co">#&gt; [6,]         NA            NA           NA           NA              NA</span>
<span class="co">#&gt; [7,]          4            NA     1.733354     1.148392        1.733354</span>
<span class="co">#&gt;      prb.branch_office prb.weight prb.threshold</span>
<span class="co">#&gt; [1,]          1.733354  0.2931724             1</span>
<span class="co">#&gt; [2,]                NA         NA            NA</span>
<span class="co">#&gt; [3,]                NA         NA            NA</span>
<span class="co">#&gt; [4,]                NA         NA            NA</span>
<span class="co">#&gt; [5,]                NA         NA            NA</span>
<span class="co">#&gt; [6,]                NA         NA            NA</span>
<span class="co">#&gt; [7,]          1.733354  6.3484549             1</span></pre></div>
</div>
<div id="episode-tracking" class="section level3">
<h3 class="hasAnchor">
<a href="#episode-tracking" class="anchor"></a>Episode tracking</h3>
<p>Use <code><a href="reference/episodes.html">episodes()</a></code> to create a unique identifier for related events based on a case definition.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="reference/episodes.html">episodes</a></span>(<span class="fl">1</span>:<span class="fl">7</span>, <span class="kw">case_length</span> <span class="kw">=</span> <span class="fl">2</span>)
<span class="co">#&gt; [1] "E.1 (C)" "E.1 (D)" "E.1 (D)" "E.4 (C)" "E.4 (D)" "E.4 (D)" "E.7 (C)"</span>
<span class="fu"><a href="reference/episodes.html">episodes</a></span>(<span class="fl">1</span>:<span class="fl">7</span>, <span class="kw">case_length</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">episode_type</span> <span class="kw">=</span> <span class="st">"rolling"</span>)
<span class="co">#&gt; [1] "E.1 (C)" "E.1 (D)" "E.1 (D)" "E.1 (R)" "E.1 (D)" "E.1 (R)" "E.1 (D)"</span></pre></div>
<p>Use <code><a href="reference/partitions.html">partitions()</a></code> to create a unique identifier for events within the same time or numerical interval.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="reference/partitions.html">partitions</a></span>(<span class="fl">1</span>:<span class="fl">7</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">separate</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; [1] "PN.1 (I)" "PN.1 (D)" "PN.3 (I)" "PN.3 (D)" "PN.5 (I)" "PN.5 (D)" "PN.5 (D)"</span>
<span class="fu"><a href="reference/partitions.html">partitions</a></span>(<span class="fl">1</span>:<span class="fl">7</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">3</span>, <span class="kw">separate</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; [1] "PN.1 (I)" "PN.1 (D)" "PN.3 (I)" "PN.3 (D)" "PN.5 (I)" "PN.5 (D)" "PN.5 (D)"</span></pre></div>
<p>Find out more <a href="https://olisansonwu.github.io/diyar/index.html">here!</a></p>
</div>
</div>
<div id="bugs-and-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#bugs-and-issues" class="anchor"></a>Bugs and issues</h2>
<p>Please report any bug or issues with using this package <a href="https://github.com/OlisaNsonwu/diyar/issues">here</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=diyar">https://​cloud.r-project.org/​package=diyar</a>
</li>
<li>Browse source code at <br><a href="https://github.com/OlisaNsonwu/diyar/">https://​github.com/​OlisaNsonwu/​diyar/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/OlisaNsonwu/diyar/issues">https://​github.com/​OlisaNsonwu/​diyar/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Olisaeloka Nsonwu <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=diyar"><img src="http://www.r-pkg.org/badges/version/diyar" alt="CRAN version"></a></li>
<li><a href="https://www.r-pkg.org/pkg/diyar"><img src="https://cranlogs.r-pkg.org/badges/diyar" alt="CRAN RStudio mirror downloads"></a></li>
<li><a href="https://codecov.io/github/OlisaNsonwu/diyar?branch=master"><img src="https://codecov.io/gh/OlisaNsonwu/diyar/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Olisaeloka Nsonwu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
